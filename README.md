# dating-site-API

API-сервис для сайта знакомств.
Хост развернутого проекта http://2.57.187.13/
<hr><br>

# Концепция:
1. Пользователи регистрируются и проходят авторизацию по логину и паролю.
2. Модели пользователей имеют обязательные поля:
<br>аватар, пол, имя и фамилия, почта, долгота и широта.
<br>*на картинку аватара при регистрации накладывается водяной знак.
3. Авторизованные пользователь должны иметь возможность:
1) отмечать понравившихся пользователей. Если возникает взаимная <br>симпатия, то на электронку обоих отправляется уведомление.
2) выводить и фильтровать список всех пользователей по полу, имени, <br>фамилии и дистанции, в пределах которой имеются другие пользователи. 
4. Запросы к БД должны быть оптимизированы.

# Краткое описание проекта
Проект развернут с использованием HTTP-сервера nginx и WSGI-сервера Gunicorn.
<br>Сервис использует SMPT сервер mail.ru.
<br>При регистрации реального адреса электронной почты вы получите уведомление
<br>на свой ящик, если создать у пользователей взаимную отметку.

## Перспективные доработки проекта
<li>Перенести БД с SQLite на PostgreSQL.
<li>Контейнеризировать БД и веб-сервер в Docker-compose.
<br><br>

# Технологии:
    Django==2.2.19
    Django-rest-framework==3.13.1
    Python==3.10.0

# Запуск и работа с проектом
## Тестирование API
Можно направить HTTP-запросы в соответствии с правами доступа и эндпоинтам.
<br><br>

# Ресурсы сервиса

## На сервисе доступны эндпоинты:
1) Регистрация нового клиента:
/api/clients/create/

2) Оценивание участником другого участника: 
/api/clients/{client_id}/match/

3) Просмотр списка участников:
/api/list/

## Фильтрация списка 
Фильтрацию списка можно произвести по полу, имени, фамилии,
<br>а также фильтровать участников в пределах заданной дистанции <br>относительно авторизованного пользователя.
<br><br>
Для фильтрации используйте ключи соотвествено:
Фильтр             | Ключ
-------------------|-----------------------|
 по полу:          | /?gender=
 по имени:         | /?first_name=
 по фамилии:       | /?last_name=
 по дистанции, км: | /?get_in_distance_km=

## Права доступа к ресурсам сервиса

В проекте использована базовая авторизация: по логину и паролю.

### Неавторизованные участники могут:

    - создать аккаунт;

### Авторизованные участники могут:

    - входить в систему под своим логином и паролем;
    - оценивать других участников;
    - просматривать и фильтровть список участников.


# Примеры запросов к API

Запросы к API начинаются с «/api/»

1) Регистрация участника:

POST-запрос: /clients/create/
<br /> *Request sample:*
```python
{
    "email": "man0@fake.ru",
    "username": "man0",
    "password": "pass_man",
    "first_name": "name0",
    "last_name": "surname0",
    "avatar": "avatar.jpg",
    "gender": "М",
    "longitude": 36.57912284676751,
    "latitude": 50.61301720349709
}
```
*Response sample (201):*
```python
{
    "id": 2,
    "username": "man0",
    "email": "man0@fake.ru",
    "first_name": "man0",
    "last_name": "man0",
    "avatar": "http://2.57.187.13/media/clients/avatar.jpg",
    "gender": "М",
    "is_match": false,
    "longitude": 36.57912284676751,
    "latitude": 50.61301720349709
}
```
*Response sample (400):*
```python
{
    "email": [
        "пользователь с таким e-mail уже существует."
    ],
    "username": [
        "Обязательное поле."
    ]
}
```

2) Создание отметки у участника:

GET-запрос: /clients/2/match/
<br /> *Response sample: (200)*
```python
{
    "follower": 1,
    "person": 2
}
```

3) Удаление отметки у участника:

DELETE-запрос: /clients/2/match/
<br /> *Response sample: (204)*
```python

```

4) Фильтр по списку участников:

GET-запрос: /list/?gender=М&first_name=man0&last_name=man0
<br /> *Response sample:*
```python
[
    {
        "id": 2,
        "username": "man0",
        "email": "man0@fake.ru",
        "first_name": "man0",
        "last_name": "man0",
        "avatar": "http://2.57.187.13/media/clients/man_symbol.jpg",
        "gender": "М",
        "is_match": false,
        "longitude": 36.57912284676751,
        "latitude": 50.61301720349709
    }
]
```

### <br /> Автор проекта:
Немыкин Евгений<br />
nonwander@gmail.com<br />
Telegram: @nonwander
